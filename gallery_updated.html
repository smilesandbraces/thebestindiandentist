<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Patient Gallery – Transformations & Testimonials</title>
  <meta name="description" content="Explore real before-and-after cases and patient stories from Smiles & Braces Dental Clinic in Lucknow. Dynamic gallery makes it easy to add new cases and videos."/>
  <link rel="canonical" href="https://www.bestindiandentist.com/gallery_updated.html"/>

  <!-- Social preview -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Patient Gallery – Transformations & Testimonials"/>
  <meta property="og:description" content="See our patients’ journeys from start to finish and watch their testimonials."/>
  <meta property="og:url" content="https://www.bestindiandentist.com/gallery_updated.html"/>
  <meta property="og:image" content="https://www.bestindiandentist.com/assets/images/og/clinic-preview.webp"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <link rel="icon" href="/assets/icons/favicon.ico"/>
  <meta name="theme-color" content="#0e7fa8"/>

  <!-- Fonts and base styles -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Carattere&family=Fanwood+Text:ital@0;1&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/site.css">

  <style>
    :root {
      --accent: #0ea5e9;
      --ink: #0b2530;
      --muted: #58707a;
      --card-bg: #ffffff;
      --ring: rgba(14, 165, 233, 0.25);
    }

    .section-head { text-align:center; margin-bottom:1.5rem; }
    .section-head h2 { font-size:clamp(1.6rem,2.5vw,2.25rem); line-height:1.2; margin-bottom:0.5rem; }
    .section-head p { color:var(--muted); max-width:600px; margin:0 auto; font-size:0.95rem; }

    .filter-container { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; margin-bottom:1rem; }
    .filter-btn {
      padding:0.5rem 0.8rem; border:1px solid #dbe7ee; border-radius:999px;
      background:#f8fbfd; font-size:0.9rem; cursor:pointer; transition:background .2s,color .2s,border-color .2s;
    }
    .filter-btn.is-active { background:var(--accent); color:#fff; border-color:var(--accent); box-shadow:0 0 0 3px var(--ring); }

    .grid { display:grid; gap:16px; }
    .grid.showcase { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }

    /* FORCE 3 videos per row on desktop, wrap further videos to next rows */
    .grid.video { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    @media (max-width: 1024px) { .grid.video { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 640px)  { .grid.video { grid-template-columns: 1fr; } }

    .card {
      background:var(--card-bg); border:1px solid #e8eff3; border-radius:16px; overflow:hidden;
      box-shadow:0 6px 20px rgba(12,50,78,.06); display:flex; flex-direction:column;
    }
    .card .pad { padding:14px 16px; }
    .card h3 { margin:0 0 4px; font-size:1.1rem; line-height:1.3; }
    .card p.small { font-size:0.9rem; color:var(--muted); }
    .badge {
      display:inline-block; font-size:0.75rem; text-transform:capitalize; color:var(--accent);
      background:rgba(14,165,233,.08); border:1px solid rgba(14,165,233,.2); padding:.2rem .5rem; border-radius:999px;
    }

    .ba-wrap { position:relative; aspect-ratio:4/3; background:#f2f7f9; overflow:hidden; --split:50%; }
    .ba-before, .ba-after { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    .ba-after { clip-path: polygon(var(--split) 0, 100% 0, 100% 100%, var(--split) 100%); }
    .ba-divider::after { content:""; position:absolute; top:0; bottom:0; left:calc(var(--split)); width:2px; background:#ffffffaa; backdrop-filter:blur(1px); box-shadow:0 0 0 1px rgba(0,0,0,.06); }
    .ba-labels { position:absolute; inset:10px; display:flex; justify-content:space-between; pointer-events:none; }
    .ba-labels span { background:rgba(0,0,0,.55); color:#fff; font-size:.75rem; padding:.2rem .45rem; border-radius:6px; }
    .ba-controls { position:absolute; left:12px; right:12px; bottom:12px; display:flex; align-items:center; }
    .ba-range {
      width:100%; -webkit-appearance:none; appearance:none; height:6px; border-radius:999px;
      background:linear-gradient(90deg, var(--accent) var(--split), #dfe9ef 0); outline:none;
    }
    .ba-range::-webkit-slider-thumb {
      -webkit-appearance:none; appearance:none; width:22px; height:22px; border-radius:50%;
      background:#fff; border:2px solid var(--accent); box-shadow:0 2px 8px rgba(14,165,233,.35); cursor:grab;
    }
    .ba-range:focus-visible { box-shadow:0 0 0 4px var(--ring); }

    .video-wrap { position:relative; aspect-ratio:16/9; background:#0b25300d; overflow:hidden; }
    .video-wrap iframe, .video-wrap video { position:absolute; inset:0; width:100%; height:100%; }

    .lite-youtube { position:relative; display:block; width:100%; height:100%; background-size:cover; background-position:center; cursor:pointer; }
    .lite-youtube::after { content:""; position:absolute; inset:0; background:linear-gradient(180deg, transparent 60%, rgba(0,0,0,.35)); }
    .lite-youtube .play {
      position:absolute; inset:0; margin:auto; width:66px; height:46px; background:#000000bf; border-radius:12px;
      display:grid; place-items:center; box-shadow:0 12px 20px rgba(0,0,0,.22);
    }
    .lite-youtube .play svg { width:24px; height:24px; fill:#fff; }
    .lite-youtube:focus-visible { outline:4px solid var(--ring); border-radius:12px; }

    .reveal { opacity:0; transform:translateY(8px); transition:opacity .35s ease, transform .35s ease; }
    .reveal.is-in { opacity:1; transform:none; }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="header">
    <div class="container nav">
      <a class="brand" href="/" aria-label="Smiles & Braces Dental Clinic — Dr. Vikram Jeet Singh">
        <span class="brand-line clinic">Smiles & Braces Dental Clinic</span>
        <span class="brand-line doctor">Dr. Vikram Jeet Singh <span class="cred">BDS, MDS</span></span>
      </a>
      <button class="nav-toggle" aria-label="Toggle menu"><span class="hamburger"></span></button>
      <nav class="navlinks" id="site-menu" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/services.html">Services</a>
        <a href="/blog.html">Blog</a>
        <a href="/contact.html">Contact</a>
        <a class="active" href="/gallery_updated.html" aria-current="page">Gallery</a>
        <a href="/international.html">International Patients</a>
      </nav>
    </div>
  </header>

  <section class="home-hero gallery-hero" role="banner">
    <div class="home-hero__inner">
      <h1>Patient Gallery</h1>
      <p class="measure">Step inside our world of smiles — every transformation tells a story of confidence and care.</p>
      <div class="cta-buttons" role="group" aria-label="Explore or Contact">
        <a class="btn btn-primary" href="/services.html">View Our Services</a>
        <a class="btn btn-whatsapp" href="https://wa.me/919565321625?text=Hi%20Dr.%20Vikram%2C%20I%27d%20like%20to%20book%20an%20appointment.">Book via WhatsApp</a>
      </div>
    </div>
  </section>

  <nav class="container small" aria-label="Breadcrumb">
    <span><a class="link-more" href="/">Home</a> / Gallery</span>
  </nav>

  <main id="main" class="container">
    <section class="section showcase-section" aria-labelledby="tx-title">
      <div class="section-head">
        <h2 id="tx-title">Transformations</h2>
        <p class="muted">Browse real patient cases across braces, aligners, implants and cosmetic procedures. Drag the slider to compare before vs after.</p>
      </div>

      <div class="tx-controls" role="group" aria-label="Showcase controls">
        <div id="showcaseFilters" class="filter-container" hidden></div>
      </div>

      <div id="showcaseGrid" class="grid showcase" aria-live="polite"></div>
      <p id="showcaseStats" class="small muted center" style="margin-top:1rem" aria-live="polite"></p>
    </section>

    <section class="section">
      <div class="section-head">
        <h2>Videos & Testimonials</h2>
        <p>Hear from our patients and take a look around the clinic. Click a video to play.</p>
      </div>
      <div id="videoGrid" class="grid video" aria-live="polite"></div>
    </section>

    <section class="section home-cta center">
      <h2>Ready for your own smile transformation?</h2>
      <p class="measure">Message us for a quick opinion on braces, aligners, implants, or cosmetic options.</p>
      <div class="cta-buttons">
        <a href="https://wa.me/919565321625" target="_blank" rel="noopener" class="btn btn-whatsapp">WhatsApp Now</a>
        <a href="tel:+919565321625" class="btn btn-call">Call +91&nbsp;95653&nbsp;21625</a>
        <a href="/contact.html" class="btn btn-ghost">Contact Form</a>
      </div>
    </section>
  </main>

  <script>
    document.getElementById('y') && (document.getElementById('y').textContent = new Date().getFullYear());
    document.querySelector('.nav-toggle')?.addEventListener('click', () => {
      document.querySelector('.navlinks').classList.toggle('show');
    });

    const SAMPLE_DATA = {
      beforeAfter: [
        {
          title: "Bonding – Case A",
          before: "/assets/gallery/before-after/rbi1.webp",
          after: "/assets/gallery/before-after/rbi.webp",
          caption: "Gap closure with composite bonding",
          category: "bonding"
        },
        {
          title: "Self-Ligating Braces – Case B",
          before: "/assets/gallery/before-after/slgb.webp",
          after: "/assets/gallery/before-after/slgb1.webp",
          caption: "Bite correction in ~12 months",
          category: "braces"
        }
      ],
      videos: [
        { title: "Clinic Tour", type: "mp4", src: "/assets/videos/clinic-tour.mp4", poster: "/assets/videos/clinic-tour-poster.webp" },
        { title: "Patient – Extraction and RCT", type: "youtube", youtubeId: "5xB5ZuWO-ag" },
        { title: "Patient – From fear to relief", type: "youtube", youtubeId: "285SdOclAlg" },
        { title: "Patient – Another success story", type: "youtube", youtubeId: "nk7j1n6Km5Y" },
        { title: "Patient – Another success story", type: "youtube", youtubeId: "Snex35Kc254" },
        { title: "Patient – Another success story", type: "youtube", youtubeId: "Kib0e15PcIc" }
      ]
    };

    async function loadGalleryData() {
      try {
        const res = await fetch('/assets/data/gallery.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('No data file');
        return await res.json();
      } catch (e) {
        console.warn('[Gallery] Using sample data:', e.message);
        return SAMPLE_DATA;
      }
    }

    function renderFilters(items) {
      const filtersEl = document.getElementById('showcaseFilters');
      if (!filtersEl) return;
      const cats = new Set(items.map(it => (it.category || 'case').toLowerCase()));
      const buttons = ['all', ...Array.from(cats).sort()].map((cat, idx) => {
        return `<button class="filter-btn${idx === 0 ? ' is-active' : ''}" data-filter="${cat}">${cat.charAt(0).toUpperCase() + cat.slice(1)}</button>`;
      }).join('');
      filtersEl.innerHTML = buttons;
      filtersEl.hidden = false;
    }

    function renderStats(visible, total) {
      const statsEl = document.getElementById('showcaseStats');
      if (statsEl) { statsEl.textContent = `${visible} of ${total} cases`; }
    }

    function createShowcaseCard(item, idx) {
      const id = `case-${idx}`;
      return `
        <article class="card reveal" data-cat="${(item.category || 'case').toLowerCase()}">
          <div class="ba-wrap" style="--split:50%" aria-labelledby="${id}" role="group">
            <img src="${item.before}" alt="Before — ${item.title}" loading="lazy" decoding="async" class="ba-before" />
            <img src="${item.after}" alt="After — ${item.title}" loading="lazy" decoding="async" class="ba-after" />
            <div class="ba-divider" aria-hidden="true"></div>
            <div class="ba-labels"><span>Before</span><span>After</span></div>
            <div class="ba-controls">
              <input class="ba-range" type="range" min="0" max="100" value="50" aria-label="Compare before and after for ${item.title}" />
            </div>
          </div>
          <div class="pad">
            <div class="badge">${item.category || 'case'}</div>
            <h3 id="${id}">${item.title}</h3>
            ${item.caption ? `<p class="small">${item.caption}</p>` : ''}
          </div>
        </article>
      `;
    }

    function createVideoCard(item) {
      const media = (item.type === 'youtube' && item.youtubeId)
        ? `<div class="video-wrap">${createLiteYouTube(item.youtubeId, item.title)}</div>`
        : `<div class="video-wrap"><video controls preload="metadata"${item.poster ? ` poster="${item.poster}"` : ''}>
             <source src="${item.src}" type="video/mp4" />
             Your browser does not support HTML5 video.
           </video></div>`;
      return `
        <article class="card reveal">
          ${media}
          <div class="pad">
            <h3>${item.title || 'Video'}</h3>
            ${item.caption ? `<p class="small">${item.caption}</p>` : ''}
          </div>
        </article>
      `;
    }

    function createLiteYouTube(id, title = 'Video') {
      const bg = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;
      return `
        <button class="lite-youtube" style="background-image:url('${bg}')" data-youtube="${id}" aria-label="Play ${title}">
          <span class="play" aria-hidden="true">
            <svg viewBox="0 0 24 24" role="img"><path d="M8 5v14l11-7z"></path></svg>
          </span>
        </button>
      `;
    }

    function bindBeforeAfter(gridEl) {
      gridEl.addEventListener('input', e => {
        const r = e.target.closest('.ba-range');
        if (!r) return;
        const wrap = r.closest('.ba-wrap');
        const v = Number(r.value);
        wrap.style.setProperty('--split', v + '%');
        r.style.background = `linear-gradient(90deg, var(--accent) ${v}%, #dfe9ef 0)`;
      });
      gridEl.addEventListener('keydown', e => {
        const r = e.target.closest('.ba-range');
        if (!r) return;
        const step = (e.key === 'ArrowRight') ? 2 : (e.key === 'ArrowLeft' ? -2 : 0);
        if (step) {
          e.preventDefault();
          const newVal = Math.min(100, Math.max(0, Number(r.value) + step));
          r.value = newVal;
          r.dispatchEvent(new Event('input', { bubbles: true }));
        }
      });
      gridEl.addEventListener('pointerdown', e => {
        const wrap = e.target.closest('.ba-wrap');
        if (!wrap) return;
        const r = wrap.querySelector('.ba-range');
        const move = ev => {
          const rect = wrap.getBoundingClientRect();
          const v = ((ev.clientX - rect.left) / rect.width) * 100;
          const clamped = Math.min(100, Math.max(0, Math.round(v)));
          wrap.style.setProperty('--split', clamped + '%');
          r.value = clamped;
          r.style.background = `linear-gradient(90deg, var(--accent) ${clamped}%, #dfe9ef 0)`;
        };
        move(e);
        const up = () => {
          window.removeEventListener('pointermove', move);
          window.removeEventListener('pointerup', up);
        };
        window.addEventListener('pointermove', move);
        window.addEventListener('pointerup', up);
      });
    }

    function bindLiteYouTube(scope) {
      scope.addEventListener('click', e => {
        const btn = e.target.closest('.lite-youtube');
        if (!btn) return;
        const id = btn.getAttribute('data-youtube');
        const url = `https://www.youtube-nocookie.com/embed/${id}?autoplay=1&rel=0&modestbranding=1&origin=${location.origin}`;
        const iframe = document.createElement('iframe');
        iframe.title = 'YouTube video';
        iframe.loading = 'lazy';
        iframe.src = url;
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
        iframe.referrerPolicy = 'strict-origin-when-cross-origin';
        iframe.allowFullscreen = true;
        iframe.style.position = 'absolute';
        iframe.style.inset = '0';
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        scope.querySelector(`[data-youtube="${id}"]`)?.replaceWith(iframe);
      });
    }

    function revealOnScroll() {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(ent => {
          if (ent.isIntersecting) {
            ent.target.classList.add('is-in');
            observer.unobserve(ent.target);
          }
        });
      }, { threshold: 0.12 });
      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    (async () => {
      const data = await loadGalleryData();
      const showcaseGrid = document.getElementById('showcaseGrid');
      const videoGrid = document.getElementById('videoGrid');
      const filtersEl = document.getElementById('showcaseFilters');

      const cases = (data.beforeAfter && Array.isArray(data.beforeAfter) && data.beforeAfter.length)
        ? data.beforeAfter : SAMPLE_DATA.beforeAfter;
      showcaseGrid.innerHTML = cases.map((item, idx) => createShowcaseCard(item, idx)).join('');
      bindBeforeAfter(showcaseGrid);

      renderFilters(cases);
      renderStats(cases.length, cases.length);
      let activeFilter = 'all';
      filtersEl?.addEventListener('click', e => {
        const btn = e.target.closest('.filter-btn');
        if (!btn) return;
        filtersEl.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');
        activeFilter = btn.dataset.filter;
        let visibleCount = 0;
        showcaseGrid.querySelectorAll('.card').forEach(card => {
          const ok = (activeFilter === 'all') || (card.dataset.cat === activeFilter);
          card.style.display = ok ? '' : 'none';
          if (ok) visibleCount++;
        });
        renderStats(visibleCount, cases.length);
      });

      const vids = (data.videos && Array.isArray(data.videos) && data.videos.length)
        ? data.videos : SAMPLE_DATA.videos;
      videoGrid.innerHTML = vids.map(createVideoCard).join('');
      bindLiteYouTube(videoGrid);

      revealOnScroll();
    })();
  </script>
</body>
</html>
