<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="robots" content="index,follow"/>

  <title>Gallery | Before & After & Videos | Smiles & Braces Dental Clinic Lucknow</title>
  <meta name="description" content="See real before & after orthodontic results and patient videos from Smiles & Braces Dental Clinic, Indira Nagar, Lucknow. Upload MP4s or embed YouTube links easily."/>
  <link rel="canonical" href="https://www.bestindiandentist.com/gallery.html"/>

  <!-- Social -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Patient Gallery â€“ Before & After + Videos"/>
  <meta property="og:description" content="See real patient outcomes and clinic videos."/>
  <meta property="og:url" content="https://www.bestindiandentist.com/gallery.html"/>
  <meta property="og:image" content="https://www.bestindiandentist.com/assets/images/og/clinic-preview.webp"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <link rel="icon" href="/assets/icons/favicon.ico"/>
  <meta name="theme-color" content="#0e7fa8"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Carattere&display=swap" rel="stylesheet">

  <!-- ===== Single-file styles ===== -->
  <style>
    :root{
      --brand:#0e7fa8;
      --ink:#0b2430;
      --bg:#f7fafb;
      --line:rgba(12,26,35,.14);
      --muted:#5f6b73;
      --ring:0 0 0 6px rgba(14,127,168,.15);
      --glow:0 12px 34px rgba(14,127,168,.16);
      --card:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.98));
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg);line-height:1.6}
    a{color:var(--brand);text-decoration:none}
    img{max-width:100%;height:auto;display:block}
    .container{max-width:1140px;margin:0 auto;padding:0 16px}

    /* Header (kept similar to your look) */
    .header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #eef2f4}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 0}
    .brand{display:flex;flex-direction:column;font-weight:800;color:#0b2430}
    .brand-line.clinic{font-size:1.05rem}
    .brand-line.doctor{font-size:.88rem;color:#4a5a63}
    .cred{font-weight:700;color:var(--brand)}
    .navlinks{display:flex;gap:14px;align-items:center}
    .navlinks a{padding:8px 10px;border-radius:10px;color:#0b2430}
    .navlinks a.active{background:rgba(14,127,168,.1);color:var(--brand);font-weight:700}
    .nav-toggle{display:none}

    /* Hero */
    .home-hero.gallery-hero{
      background: radial-gradient(1200px 360px at 20% -20%, rgba(14,127,168,.10), transparent 60%),
                  radial-gradient(1200px 360px at 90% 0%, rgba(14,127,168,.08), transparent 60%),
                  #ffffff;
      border-bottom:1px solid #eef2f4;
    }
    .home-hero__inner{padding:48px 0;text-align:center}
    .home-hero__inner h1{font-size:2.2rem;line-height:1.15;margin:0 0 6px;font-weight:800;letter-spacing:-.02em}
    .home-hero__inner .measure{max-width:780px;margin:0 auto;color:#57707b}
    .cta-buttons{display:flex;gap:10px;justify-content:center;margin-top:16px}
    .btn{display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #e3eaee;background:#fff;font-weight:700}
    .btn-primary{background:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 6px 20px rgba(14,127,168,.18)}
    .btn-whatsapp{background:#25d366;color:#fff;border-color:#25d366}
    .btn-call{background:#0e7fa8;color:#fff;border-color:#0e7fa8}
    .btn-ghost{background:#ffffff;color:#0b2430}

    /* Breadcrumb */
    nav[aria-label="Breadcrumb"]{font-size:.92rem;color:#6a7b86;padding:10px 0}

    /* ===== Luxe Gallery Section ===== */
    .gallery-luxe{margin:18px 0 36px}
    .luxe-header{
      position:relative;display:flex;align-items:center;justify-content:space-between;gap:18px;
      padding:18px;border:1px solid var(--line);border-radius:22px;background:
        linear-gradient(135deg, rgba(14,127,168,.06), rgba(255,255,255,.85));
      backdrop-filter: blur(8px); box-shadow: var(--glow);
    }
    .luxe-title{display:flex;align-items:center;gap:14px}
    .crest{position:relative;width:46px;height:46px;border-radius:14px;
      background: conic-gradient(from 220deg, rgba(14,127,168,.25), rgba(14,127,168,.05), rgba(14,127,168,.25));
      border:1px solid rgba(14,127,168,.35);box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 10px 20px rgba(14,127,168,.15);
    }
    .crest::after{content:"";position:absolute;inset:10px;border-radius:10px;background:
      radial-gradient(circle at 30% 30%, #fff, rgba(14,127,168,.35) 40%, rgba(14,127,168,.6) 65%);}
    .head-copy h1{margin:0;letter-spacing:-.02em;font-weight:800}
    .head-copy p{margin:2px 0 0;color:#5f6b73}
    .luxe-metrics{display:flex;align-items:center;gap:16px}
    .metric{display:flex;flex-direction:column;align-items:flex-end}
    .metric-num{font-weight:900;font-size:1.35rem;color:var(--brand);line-height:1}
    .metric-lab{font-size:.82rem;color:#6a7b86}
    .metric.sep{width:1px;height:28px;background:linear-gradient(to bottom, transparent,var(--line),transparent)}

    /* Tabs */
    .luxe-tabs{display:flex;gap:10px;margin:18px 0 14px}
    .luxe-tab{
      border:1px solid var(--line);background:#fff;color:#08222d;padding:10px 14px;border-radius:999px;
      font-weight:800;cursor:pointer;transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .luxe-tab:hover{transform:translateY(-1px)}
    .luxe-tab.is-active{background:linear-gradient(180deg, #fff, #f8fbfd);box-shadow: var(--glow);border-color:rgba(14,127,168,.35)}

    /* Toolbar */
    .luxe-toolbar{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
    .chip-row{display:flex;flex-wrap:wrap;gap:8px}
    .chip{border:1px solid var(--line);background:#fff;padding:8px 12px;border-radius:999px;font-weight:700;cursor:pointer;transition:.18s}
    .chip:hover{transform:translateY(-1px)}
    .chip.is-active{background:var(--brand);color:#fff;border-color:var(--brand)}
    .tools{display:flex;align-items:center;gap:10px;margin-left:auto}
    .search-wrap{position:relative}
    .search-ico{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:#7a8a93}
    #gallery-search{padding:10px 12px 10px 36px;border-radius:14px;border:1px solid var(--line);min-width:280px;outline:none;background:rgba(255,255,255,.95)}
    #gallery-search:focus{box-shadow: var(--ring);border-color:rgba(14,127,168,.5)}
    .density{display:flex;gap:6px}
    .density-btn{border:1px solid var(--line);background:#fff;padding:8px 10px;border-radius:12px;font-weight:800;cursor:pointer;transition:.18s}
    .density-btn.is-active{background:var(--brand);color:#fff;border-color:var(--brand)}

    /* Panes & grids */
    .luxe-panes{position:relative}
    .luxe-pane{display:none}
    .luxe-pane.is-active{display:block}
    .luxe-grid{display:grid;gap:18px}
    .luxe-grid.ba{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}
    .luxe-grid.vid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}
    .tip{text-align:center;color:#6a7b86;margin-top:10px}

    /* Card polish (applies to your existing .card markup) */
    .card{background:var(--card);border-radius:18px;border:1px solid var(--line);box-shadow:0 6px 18px rgba(10,30,40,.08);overflow:hidden;transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 16px 34px rgba(10,30,40,.16);border-color:rgba(14,127,168,.35)}
    .card .pad{padding:14px 16px}
    .badge{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;background:rgba(14,127,168,.1);color:var(--brand);font-weight:800;border:1px solid rgba(14,127,168,.2)}

    /* Before/After slider */
    .ba-wrap{position:relative;aspect-ratio:4/3;background:#f2f5f7}
    .ba-wrap img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .ba-after{clip-path:inset(0 0 0 var(--split,50%))}
    .ba-controls{position:absolute;left:0;right:0;bottom:8px;display:flex;justify-content:center}
    .ba-range{width:92%;appearance:none;height:4px;background:linear-gradient(90deg,var(--brand) 50%,#dde3e7 0);border-radius:999px}
    .ba-range::-webkit-slider-thumb{appearance:none;width:22px;height:22px;border-radius:50%;background:var(--brand);border:2px solid #fff;box-shadow:0 1px 6px rgba(0,0,0,.25)}
    .ba-range::-moz-range-thumb{width:22px;height:22px;border-radius:50%;background:var(--brand);border:2px solid #fff;box-shadow:0 1px 6px rgba(0,0,0,.25)}
    .ba-labels{position:absolute;inset:8px;display:flex;justify-content:space-between;pointer-events:none}
    .ba-labels span{background:rgba(0,0,0,.52);color:#fff;font-weight:800;font-size:12px;padding:4px 8px;border-radius:8px;backdrop-filter:blur(2px);border:1px solid rgba(255,255,255,.55)}

    /* Videos */
    .video-wrap{position:relative;aspect-ratio:16/9;background:#000}
    .video-wrap iframe,.video-wrap video{position:absolute;inset:0;width:100%;height:100%;display:block}
    .video-wrap video{background:#000}

    /* Footer */
    .footer{background:#0b2430;color:#e7eef2;margin-top:36px}
    .footer-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;padding:24px 0}
    .footer a{color:#c9eefc}

    /* Helpers & responsive */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    @media (max-width:900px){.navlinks{display:none}.nav-toggle{display:inline-flex}}
    @media (max-width:640px){
      .luxe-header{flex-direction:column;align-items:flex-start}
      .tools{width:100%;margin-left:0;justify-content:space-between}
      #gallery-search{min-width:0;width:100%}
      .footer-grid{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion:reduce){
      .luxe-tab,.chip,.density-btn,.card{transition:none}
    }
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>

  <!-- ===== HEADER (kept) ===== -->
  <header class="header">
    <div class="container nav">
      <a class="brand" href="/" aria-label="Smiles & Braces Dental Clinic â€” Dr. Vikram Jeet Singh">
        <span class="brand-line clinic">Smiles & Braces Dental Clinic</span>
        <span class="brand-line doctor">Dr. Vikram Jeet Singh <span class="cred">BDS, MDS</span></span>
      </a>
      <button class="nav-toggle" aria-label="Toggle menu"><span class="hamburger">â˜°</span></button>
      <nav class="navlinks" id="site-menu" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/services.html">Services</a>
        <a href="/blog.html">Blog</a>
        <a href="/contact.html">Contact</a>
        <a class="active" href="/gallery.html" aria-current="page">Gallery</a>
        <a href="/international.html">International Patients</a>
      </nav>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="home-hero gallery-hero" role="banner">
    <div class="home-hero__inner container">
      <h1>Clinic Gallery</h1>
      <p class="measure">Step inside our world of smiles â€” every photo tells a story of confidence and care.</p>
      <div class="cta-buttons" role="group" aria-label="Explore or Contact">
        <a class="btn btn-primary" href="/services.html">View Our Services</a>
        <a class="btn btn-whatsapp" href="https://wa.me/919565321625?text=Hi%20Dr.%20Vikram%2C%20I%27d%20like%20to%20book%20an%20appointment.">Book via WhatsApp</a>
      </div>
    </div>
  </section>

  <!-- ===== BREADCRUMB ===== -->
  <nav class="container small" aria-label="Breadcrumb">
    <span><a class="link-more" href="/">Home</a> / Gallery</span>
  </nav>

  <!-- ===== MAIN ===== -->
  <main id="main" class="container gallery-luxe">
    <!-- Luxe header -->
    <div class="luxe-header">
      <div class="luxe-title">
        <div class="crest" aria-hidden="true"></div>
        <div class="head-copy">
          <h1>Patient Gallery</h1>
          <p class="muted">Before &amp; After â€¢ Testimonial &amp; Treatment Videos</p>
        </div>
      </div>
      <div class="luxe-metrics" aria-label="Gallery overview">
        <div class="metric">
          <span class="metric-num" id="count-ba">0</span>
          <span class="metric-lab">Cases</span>
        </div>
        <div class="metric sep"></div>
        <div class="metric">
          <span class="metric-num" id="count-videos">0</span>
          <span class="metric-lab">Videos</span>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="luxe-tabs" role="tablist" aria-label="Gallery Tabs">
      <button class="luxe-tab is-active" role="tab" aria-selected="true" aria-controls="pane-ba" id="tab-ba">Patients (Before &amp; After)</button>
      <button class="luxe-tab" role="tab" aria-selected="false" aria-controls="pane-videos" id="tab-videos">Videos</button>
    </div>

    <!-- Toolbar -->
    <div class="luxe-toolbar" role="group" aria-label="Gallery tools">
      <div class="chip-row" aria-label="Filter categories">
        <button class="chip is-active" data-filter="all">All</button>
        <button class="chip" data-filter="braces">Braces</button>
        <button class="chip" data-filter="aligners">Aligners</button>
        <button class="chip" data-filter="implant">Implants</button>
        <button class="chip" data-filter="bonding">Bonding</button>
        <button class="chip" data-filter="smile makeover">Smile Makeover</button>
      </div>
      <div class="tools">
        <div class="search-wrap">
          <svg aria-hidden="true" viewBox="0 0 24 24" class="search-ico"><path fill="currentColor" d="M10 2a8 8 0 1 1 0 16a8 8 0 0 1 0-16m0 2a6 6 0 1 0 0 12a6 6 0 0 0 0-12m10.7 17.3l-3.9-3.9l1.4-1.4l3.9 3.9l-1.4 1.4Z"/></svg>
          <label class="sr-only" for="gallery-search">Search gallery</label>
          <input id="gallery-search" type="search" placeholder="Search cases & videosâ€¦" aria-label="Search gallery">
        </div>
        <div class="density" role="group" aria-label="Density">
          <button class="density-btn is-active" data-view="comfortable" title="Comfortable">Comfort</button>
          <button class="density-btn" data-view="compact" title="Compact">Compact</button>
        </div>
      </div>
    </div>

    <!-- Panes -->
    <div class="luxe-panes">
      <!-- BEFORE & AFTER -->
      <div class="luxe-pane is-active" id="pane-ba" role="tabpanel" aria-labelledby="tab-ba">
        <div class="luxe-grid ba" id="baGrid" aria-live="polite"></div>
        <div class="tip">Tip: Drag the slider on each photo to compare before vs after.</div>
      </div>
      <!-- VIDEOS -->
      <div class="luxe-pane" id="pane-videos" role="tabpanel" aria-labelledby="tab-videos">
        <div class="luxe-grid vid" id="videoGrid" aria-live="polite"></div>
      </div>
    </div>

    <!-- CTA -->
    <section class="section home-cta" style="text-align:center;margin-top:26px">
      <h2 style="margin:0 0 6px;letter-spacing:-.01em">Want results like these?</h2>
      <p class="measure" style="max-width:680px;margin:0 auto 12px;color:#5f6b73">Message us for a quick opinion on braces, aligners, implants or cosmetic options.</p>
      <div class="cta-buttons">
        <a href="https://wa.me/919565321625" target="_blank" rel="noopener" class="btn btn-whatsapp">WhatsApp Now</a>
        <a href="tel:+919565321625" class="btn btn-call">Call +91&nbsp;95653&nbsp;21625</a>
        <a href="/contact.html" class="btn btn-ghost">Contact Form</a>
      </div>
    </section>
  </main>

  <!-- ===== FOOTER (kept) ===== -->
  <footer class="footer">
    <div class="container footer-grid">
      <div>
        <h3>Smiles &amp; Braces Dental Clinic</h3>
        <p class="small">Shop No. 6, Javed Market, near Aurobindo Park, Munshi Pulia, Sector 12, Indira Nagar, Lucknow, Uttar Pradesh 226016</p>
        <p class="small">Call/WhatsApp: <a href="tel:+919565321625">+91 95653 21625</a> â€¢ <a href="tel:+917570000801">+91 75700 00801</a></p>
      </div>
      <div>
        <h3>Quick links</h3>
        <p class="small"><a href="/privacy.html">Privacy</a> Â· <a href="/terms.html">Terms</a> Â· <a href="/sitemap.xml">Sitemap</a></p>
        <p class="small">Â© <span id="y"></span> Smiles &amp; Braces. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- ===== Single-file scripts ===== -->
  <script>
    // Year + mobile menu
    document.getElementById('y').textContent = new Date().getFullYear();
    document.querySelector('.nav-toggle')?.addEventListener('click',()=>document.querySelector('.navlinks').classList.toggle('show'));

    // Tabs (keyboard accessible)
    (function tabsA11y(){
      const tabs = Array.from(document.querySelectorAll('.luxe-tab'));
      const panes = Array.from(document.querySelectorAll('.luxe-pane'));
      function activate(i){
        tabs.forEach((t,idx)=>{
          t.classList.toggle('is-active', idx===i);
          t.setAttribute('aria-selected', String(idx===i));
        });
        panes.forEach((p,idx)=>p.classList.toggle('is-active', idx===i));
        tabs[i].focus();
      }
      tabs.forEach((btn,i)=>{
        btn.addEventListener('click',()=>activate(i));
        btn.addEventListener('keydown',e=>{
          if(e.key==='ArrowRight') activate((i+1)%tabs.length);
          else if(e.key==='ArrowLeft') activate((i-1+tabs.length)%tabs.length);
          else if(e.key==='Home') activate(0);
          else if(e.key==='End') activate(tabs.length-1);
        });
      });
    })();

    // --- Data loading (uses external file if available, else fallback) ---
    const SAMPLE_DATA = {
      beforeAfter:[
        {"title":"Bonding â€“ Case A","before":"/assets/gallery/before-after/rbi1.webp","after":"/assets/gallery/before-after/rbi.webp","caption":"Composite bonding result","category":"bonding"},
        {"title":"Self-ligating Braces â€“ Case B","before":"/assets/gallery/before-after/case-b-before.webp","after":"/assets/gallery/before-after/case-b-after.webp","caption":"12 months, bite correction","category":"braces"}
      ],
      videos:[
        {"title":"Clinic Tour","type":"mp4","src":"/assets/videos/clinic-tour.mp4","poster":"/assets/videos/clinic-tour-poster.webp","caption":"A quick walk-through of Smiles & Braces"},
        {"title":"Patient â€“ Extraction and RCT","type":"youtube","youtubeId":"5xB5ZuWO-ag","caption":"Real patient experience"},
        {"title":"Patient â€“ From fear to relief","type":"youtube","youtubeId":"285SdOclAlg","caption":"Patient journey"},
        {"title":"Patient â€“ Testimonial","type":"youtube","youtubeId":"nk7j1n6Km5Y","caption":"Smiles & confidence"}
      ]
    };
    async function loadData(){
      try{
        const res = await fetch('/assets/data/gallery.json',{cache:'no-store'});
        if(!res.ok) throw new Error('No data file');
        return await res.json();
      }catch(e){
        console.warn('[Gallery] Using SAMPLE_DATA. Create /assets/data/gallery.json to override.', e);
        return SAMPLE_DATA;
      }
    }

    // --- Renderers (kept compatible with IDs) ---
    function renderBA(items){
      const grid = document.getElementById('baGrid');
      grid.innerHTML = '';
      (items||[]).forEach((it, idx)=>{
        const card = document.createElement('article');
        card.className = 'card';
        const beforeAlt = `Before â€” ${it.title||'case'}`;
        const afterAlt  = `After â€” ${it.title||'case'}`;
        card.innerHTML = `
          <div class="ba-wrap" data-idx="${idx}" style="--split:50%">
            <img src="${it.before}" alt="${beforeAlt}" loading="lazy" decoding="async" class="ba-before"/>
            <img src="${it.after}" alt="${afterAlt}"  loading="lazy" decoding="async" class="ba-after"/>
            <div class="ba-labels"><span>Before</span><span>After</span></div>
            <div class="ba-controls">
              <input class="ba-range" type="range" min="0" max="100" value="50" aria-label="Compare before and after for ${it.title||'case'}">
            </div>
          </div>
          <div class="pad">
            <div class="badge">${it.category || 'case'}</div>
            <h3 style="margin:8px 0 4px">${it.title || 'Smile makeover'}</h3>
            ${it.caption ? `<p class="small" style="color:#6a7b86;margin:0">${it.caption}</p>` : ''}
          </div>`;
        grid.appendChild(card);
      });
      // Slider color update via event delegation
      grid.addEventListener('input',e=>{
        const r=e.target.closest('.ba-range'); if(!r) return;
        const wrap=r.closest('.ba-wrap'); const v=+r.value;
        wrap.style.setProperty('--split', v+'%');
        r.style.background=`linear-gradient(90deg,var(--brand) ${v}%,#dde3e7 0)`;
      });
    }

    function ytIframe(id, titleText){
      const url = `https://www.youtube-nocookie.com/embed/${id}?rel=0&modestbranding=1&origin=${location.origin}`;
      const title = titleText ? `YouTube video: ${titleText}` : 'YouTube video';
      return `<iframe title="${title}" loading="lazy" src="${url}" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`;
    }

    function renderVideos(items){
      const grid = document.getElementById('videoGrid');
      grid.innerHTML = '';
      (items||[]).forEach(it=>{
        const card = document.createElement('article');
        card.className = 'card';
        const title = it.title || 'Video';
        const media = (it.type === 'youtube' && it.youtubeId)
          ? `<div class="video-wrap">${ytIframe(it.youtubeId, title)}</div>`
          : `<div class="video-wrap">
               <video controls preload="metadata" playsinline ${it.poster?`poster="${it.poster}"`:''}>
                 <source src="${it.src}" type="video/mp4">
                 Your browser does not support HTML5 video.
               </video>
             </div>`;
        card.innerHTML = `${media}
          <div class="pad">
            <h3 style="margin:6px 0 4px">${title}</h3>
            ${it.caption ? `<p class="small" style="color:#6a7b86;margin:0">${it.caption}</p>` : ''}
          </div>`;
        grid.appendChild(card);
      });
    }

    // --- Luxe enhancements: counters, filters, search, density ---
    (function enhance(){
      const $baGrid = document.getElementById('baGrid');
      const $videoGrid = document.getElementById('videoGrid');
      const $countBA = document.getElementById('count-ba');
      const $countV  = document.getElementById('count-videos');
      const chips = Array.from(document.querySelectorAll('.chip'));
      const search = document.getElementById('gallery-search');
      const densityBtns = Array.from(document.querySelectorAll('.density-btn'));
      const $baWrap = document.querySelector('.luxe-grid.ba');
      const $vWrap  = document.querySelector('.luxe-grid.vid');

      let activeFilter='all', q='';

      function annotate(){
        $baGrid.querySelectorAll('.card').forEach(card=>{
          const cat=(card.querySelector('.badge')?.textContent||'').trim().toLowerCase();
          if(cat) card.dataset.category=cat;
          card.dataset.search=(card.textContent||'').toLowerCase();
        });
        $videoGrid.querySelectorAll('.card').forEach(card=>{
          card.dataset.search=(card.textContent||'').toLowerCase();
        });
      }
      function counts(){
        const vba=[...$baGrid.children].filter(el=>el.matches('.card') && el.style.display!=='none').length;
        const vv=[...$videoGrid.children].filter(el=>el.matches('.card') && el.style.display!=='none').length;
        $countBA.textContent=vba; $countV.textContent=vv;
      }
      function apply(){
        const ql=q.trim().toLowerCase();
        $baGrid.querySelectorAll('.card').forEach(card=>{
          const cat=(card.dataset.category||'').toLowerCase();
          const hay=card.dataset.search||'';
          const okCat=(activeFilter==='all')||cat.includes(activeFilter);
          const okQ=!ql||hay.includes(ql);
          card.style.display=(okCat&&okQ)?'':'none';
        });
        $videoGrid.querySelectorAll('.card').forEach(card=>{
          const hay=card.dataset.search||'';
          const okQ=!ql||hay.includes(ql);
          card.style.display=okQ?'':'none';
        });
        counts();
      }

      chips.forEach(ch=>ch.addEventListener('click',()=>{
        chips.forEach(c=>c.classList.remove('is-active'));
        ch.classList.add('is-active');
        activeFilter=ch.dataset.filter||'all';
        apply();
      }));
      let t;
      search?.addEventListener('input',()=>{
        clearTimeout(t); t=setTimeout(()=>{q=search.value||'';apply();},120);
      });
      densityBtns.forEach(btn=>btn.addEventListener('click',()=>{
        densityBtns.forEach(b=>b.classList.remove('is-active'));
        btn.classList.add('is-active');
        const compact=btn.dataset.view==='compact';
        $baWrap.classList.toggle('compact',compact);
        $vWrap.classList.toggle('compact',compact);
      }));

      const obs=new MutationObserver(()=>{annotate();apply();});
      obs.observe($baGrid,{childList:true});
      obs.observe($videoGrid,{childList:true});

      annotate(); apply();
    })();

    // Boot
    (async()=>{
      const data = await loadData();
      renderBA(data.beforeAfter || []);
      renderVideos(data.videos || []);
    })();
  </script>

  <!-- Quick admin note (optional, safe to remove)
    Put your media here:
      /assets/gallery/before-after/ (before/after images)
      /assets/videos/               (mp4 files & posters)
    Put your data here:
      /assets/data/gallery.json

    Example JSON:
    {
      "beforeAfter":[
        {"title":"Bonding â€“ Case A","before":"/assets/gallery/before-after/rbi1.webp","after":"/assets/gallery/before-after/rbi.webp","caption":"Composite bonding result","category":"bonding"},
        {"title":"Implant â€“ Case C","before":"/assets/gallery/before-after/case-c-before.webp","after":"/assets/gallery/before-after/case-c-after.webp","caption":"Single tooth replacement","category":"implant"}
      ],
      "videos":[
        {"title":"Clinic Tour","type":"mp4","src":"/assets/videos/clinic-tour.mp4","poster":"/assets/videos/clinic-tour-poster.webp","caption":"A quick walk-through of Smiles & Braces"},
        {"title":"Patient â€“ Extraction and RCT","type":"youtube","youtubeId":"5xB5ZuWO-ag","caption":"Real patient experience"}
      ]
    }
  -->
</body>
</html>
